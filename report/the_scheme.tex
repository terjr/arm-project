\section{ISA dependent energy consumption}
% General approach here? Implementation in methodology? Order of appearance?

The need for energy efficient processors is increasing, and in order to achieve
better understanding of how architectural decisions, we propose a method to
measure energy efficiency on the instruction level of a processor.

Our scheme relies on fairly accurate core voltage and power measurements, thus
we have to modify the processor in such a way that core power can be feed
externally.  We run a customized instruction loop, one for each applicable
instruction of the chosen ISA, and measure its power drain.

As each instruction cannot be measured alone, we create an assembly loop that
contains the instruction under test. This loop runs long enough to be measurable
by ordinary laboratory equipment.

Since some instructions takes a different amount of time, the power drain has to be
normalized using statistics gained from performance counters. Applying this
normalization, we can convert point-in-time energy consumption in terms of
wattage to energy per instruction in terms of joules.

As each instruction runs only for a determined amount of time, the measured
instruction loop has to be conditional, thus the list of equal instructions has
to be ended by a conditional branch. The impact of these alien instructions
can be mitigated using statistics and by knowing how the processor works. The
latency introduced by the conditional jump is most likely hidden by the branch
predictor in most modern architectures, either taking a single cycle or hidden
entirely. It has to be noted that its energy consumption is not hidden, and must
be accounted for to get accurate results. This method mainly focuses on
comparison between instructions, and the energy consumption of the condition
calculation and the conditional jump can then be seen as part of the common
baseline.
\todo[inline]{correct assumption?}

When each relevant instruction has been measured, we can compare their
normalized energy consumption and possibly identify patterns where consumption
is greater than expected. This can help in later architectural designs where
energy consumption is important.


