\section{Results}

%\begin{figure*}
%    \centering
%    \includegraphics[width=1.1\textwidth]{figures/graph_0123_base_lowpower_mul-0c6}
%    \label{fig:allmul}
%\end{figure*}
%
%\begin{figure*}
%    \centering
%    \includegraphics[width=0.7\textwidth]{figures/graph_0123_base_mul-0c7}
%    \label{fig:allmul}
%\end{figure*}
%
%
%
%\begin{figure*}
%    \centering
%    \subfloat[][Multiply]
%    {
%        \includegraphics[width=0.49\textwidth]{figures/graph_123_base_mul-0c5}
%        \label{fig:somemul}
%    }
%    \subfloat[][Single Cycle]
%    {
%        \includegraphics[width=0.49\textwidth]{figures/graph_1_base_arith_data_logic-0c5}
%        \label{fig:singlecycle}
%    }
%    \caption{test}
%\end{figure*}

\begin{figure*}[ht]
    \centering
    \includegraphics[width=\textwidth]{figures/graph_01_base_arith_saturate_data_cond_pack_logic-0c6}
    \caption{Energy profile of single-cycle instructions, excluding multiply.}
    \label{fig:singlecycle}
\end{figure*}


\subsection{Introduction}
In this section we present data gathered from our experiments on the ARM
Cortex-A9.

We distinguish between single-cycle instructions and multi-cycle instructions
because they behave differently in and around the execution pipeline.
Instructions consuming only one cycle are fairly easy to reason about as there
is no need to normalize energy consumption with respect to the cycle count (i.e.
time). However, it is important to also recognize CPU capabilities such as dual
issuing that we have on our processor: All single-cycle ALU instructions execute
pairwise in parallel (one in each ALU), giving a peak performance of two
instructions per CPU cycle. On the other hand, multi-cycle instructions needs to
be carefully considered. Typically, multi-cycle instructions divide work which
can be done only in a subset of the available CPUs (e.g. one) over several
cycles, lowering the average current draw. They consume less energy per
time step, but also do less useful work.

For all these reasons, we partition the measured data in two data sets; one for
single-cycle instructions and one for multi-cycle instructions.

In the graphs, all bars colored green means that the tested instruction is a
single-cycle instruction, the light blue is two-cycles, and dark blue is
three-cycle instructions. The red bar is the baseline for power measurement.
This baseline is an alias for the least power-consuming instruction we could
find, which is the {\ttfamily setend}-instruction. This instruction sets the
endianness regarding memory operations to eiter big or little
endian.\cite{armcompilerref}.


%Some instructions use variable amount of time. This section will contain
%information about how we normalize and compare energy consumption of
%these instructions. It will be difficult to compare single cycle instructions
%to the multi cycle ones, as the single cycle instructions is often the ones
%utilizing more than one ALU at a time. Also, the multi-cycle ones will most
%likely pipeline up very differently than the single cycle ones. We will try to
%draw a conclusion about the results, but it is important to note the differences
%in the execution path of these two categories.

\subsection{Single-Cycle Instructions}
On our target CPU, 72 of the 118 tested instructions falls into this category
(leaving 46 multi-cycle instructions). The per-instruction energy consumption
measured in Ampere can be seen in \autoref{fig:singlecycle}.

See \autoref{fig:singlecycle}
\begin{itemize}
    \item The unit really is WATTS.
    \item Note that baseline is really a instruction. Which instruction and how
        why is it used?
    \item add vs. adds -- explain why. Also mention that adds are removed from
        next-gen.
    \item Why is NOP as it is (contains hazards, is really a mov r0, r0)
\end{itemize}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{figures/graph_0123_base_mul-0c6}
    \caption{Energy profile of multiply instructions.}
    \label{fig:allmul}
\end{figure*}

\begin{figure}
    \centering
    \includegraphics[width=0.48\textwidth]{figures/graph_023_base_quad_saturate_extend-0c6}
    \caption{Energy profile of multi-cycle instructions, excluding multiply.}
    \label{fig:multicycle}
\end{figure}


\subsection{Multi-Cycle Instructions}

See \autoref{fig:multicycle} and \autoref{fig:allmul}
\begin{itemize}
    \item The difference between instructions are much larger in the multi-cycle
        graphs.
\end{itemize}
